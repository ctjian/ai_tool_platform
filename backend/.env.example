# 后端环境变量配置

# 数据库配置
DATABASE_URL=sqlite+aiosqlite:///./data/ai_tools.db
CHAT_DATABASE_URL=sqlite+aiosqlite:///./data/chat_history.db

# CORS配置（允许的前端域名，逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:20102,http://localhost:5174

# 应用配置
APP_NAME=AI工具平台
APP_VERSION=1.0.0
DEBUG=True

# 文件上传配置
MAX_UPLOAD_SIZE=2097152  # 2MB in bytes
UPLOAD_DIR=./uploads
ALLOWED_EXTENSIONS=
CHAT_MAX_PDF_FILES=5
CHAT_MAX_PDF_SIZE_MB=20

# 可选：预设OpenAI配置（也可以在UI中配置）
# 默认为空，优先使用UI配置，UI没有配置才使用此处配置
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.yunwu.ai/v1
TITLE_MODEL=gpt-4o-mini
OPENAI_MODELS=OpenAI:gpt-5.1-chat,gpt-4.1,chatgpt-4o-latest-20250326;Anthropic:claude-opus-4-5-20251101,claude-opus-4-1-20250805,claude-opus-4-20250514;Google:gemini-3-pro-preview,gemini-3-flash,gemini-2.5-pro;DeepSeek:deepseek-v3.2;Qwen:qwen3-max-preview

# Chat2API 代理配置（可选）
ACCESS_TOKEN=
PROXY_BASE_URL=
PROXY_MODELS=

# 计费配置（可选）
PRICING_FILE=
PRICE_INPUT_PER_1M=
PRICE_GROUP_RATIO=
PRICE_CURRENCY=

# 日志配置
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log

# 论文解析（arXiv + GROBID）
GROBID_URL=https://lfoppiano-grobid.hf.space
PAPER_DATA_DIR=./data/chat/papers
ARXIV_MAX_ACTIVE_PAPERS=3
ARXIV_CONTEXT_TOP_K=10
ARXIV_CONTEXT_MAX_TOKENS=4000
ARXIV_LOW_SCORE_FULLTEXT_THRESHOLD=0.55
ARXIV_DOWNLOAD_TIMEOUT_SEC=30
GROBID_TIMEOUT_SEC=120
ARXIV_CHUNK_TARGET_TOKENS=1024 # 期望块大小。正常拼段落时，尽量把 chunk 控制在这个附近。
ARXIV_CHUNK_MAX_TOKENS=2048 # 硬阈值。单段或单句超过这个值时，触发二次切分，不能再放任变大。
ARXIV_CHUNK_OVERLAP_TOKENS=128
ARXIV_CHUNK_MIN_TOKENS=512
ARXIV_QUERY_REWRITE_MODEL=gpt-4o-mini # 用于查询重写的模型，通常选择一个较小的模型即可
ARXIV_QUERY_REWRITE_HISTORY_TURNS=3 # 用于查询重写的上下文轮数，过多可能导致重写输入过大，过少可能导致重写效果不好
ARXIV_QUERY_REWRITE_ABSTRACT_CHARS=1200 # 用于查询重写的摘要内容长度，过长可能导致重写输入过大，过短可能导致重写效果不好
ARXIV_QUERY_REWRITE_TIMEOUT_SEC=10 # 查询重写的超时时间，过短可能导致重写失败，过长可能导致用户等待时间过长

# Embedding 检索（SiliconFlow）
EMBEDDING_BASE_URL=https://api.siliconflow.cn/v1
EMBEDDING_API_KEY=
EMBEDDING_MODEL=Pro/BAAI/bge-m3
EMBEDDING_TIMEOUT_SEC=60
EMBEDDING_BATCH_SIZE=16
